<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cooperative Anchor: C:/Users/pestourb/Documents/GitHub/SecureLoc/DecaWino/Deployment/Projects/Anchor_c/src/header/anchor_c.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cooperative Anchor
   </div>
   <div id="projectbrief">DecaWino firmware for cooperative anchors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d522931ffa1371640980b621734a4381.html">Users</a></li><li class="navelem"><a class="el" href="dir_df1a92ec3b43adc6b2c3e4428e80d3a8.html">pestourb</a></li><li class="navelem"><a class="el" href="dir_1ba8aa070ca6f3d8eae8cdc5396fa0cf.html">Documents</a></li><li class="navelem"><a class="el" href="dir_431e09cb7b37cebbd8d0eed6157311a8.html">GitHub</a></li><li class="navelem"><a class="el" href="dir_d02a181de93544e932e377cd0eecdd32.html">SecureLoc</a></li><li class="navelem"><a class="el" href="dir_7aa56f78274832cd0950654d783dbaa8.html">DecaWino</a></li><li class="navelem"><a class="el" href="dir_4cb6106d5d9f49de7aadf8dc5c8a3c35.html">Deployment</a></li><li class="navelem"><a class="el" href="dir_974cfa7edc9a9bb1e0ae31b428274fa8.html">Projects</a></li><li class="navelem"><a class="el" href="dir_ea8d59257cf0fed9d2f764de2e780f9c.html">Anchor_c</a></li><li class="navelem"><a class="el" href="dir_ffe2019e67a44649533bcece88413cdc.html">src</a></li><li class="navelem"><a class="el" href="dir_1039827b62f7f099a58cb6cd1011d14c.html">header</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">anchor_c.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file for the cooperative anchor firmware. This firmware is intended for DecaWino chips. Anchors are fixed stations performing ranging with mobile tags. The cooperative anchor firmware allow an anchor to design a tag to participate in a verification process. See the platform documentation for details.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;SPI.h&gt;</code><br />
<code>#include &lt;DecaDuino.h&gt;</code><br />
</div>
<p><a href="anchor__c_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a99c8dafec4d0173d7cdf5de73f9cef69"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a99c8dafec4d0173d7cdf5de73f9cef69">EXTENDED</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a99c8dafec4d0173d7cdf5de73f9cef69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55adda1b2ce56b29cafbdd025bfaeebc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a55adda1b2ce56b29cafbdd025bfaeebc">ALOHA</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a55adda1b2ce56b29cafbdd025bfaeebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a060c0b0e5f54bd35f2fc92e85b6773ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a060c0b0e5f54bd35f2fc92e85b6773ab">ALOHA_COLLISION_DELAY</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:a060c0b0e5f54bd35f2fc92e85b6773ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1afee9556b3ca858092d58c729a0649"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#af1afee9556b3ca858092d58c729a0649">DMAX</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:af1afee9556b3ca858092d58c729a0649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae457777c1a4a1aff4de8f5b9e3fac05d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#ae457777c1a4a1aff4de8f5b9e3fac05d">NB_ANCHORS</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ae457777c1a4a1aff4de8f5b9e3fac05d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae19bfd2ea75b7ddfc0c9e520240ab733"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#ae19bfd2ea75b7ddfc0c9e520240ab733">NODE_ID</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ae19bfd2ea75b7ddfc0c9e520240ab733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a150a81da38cd990da60c0363014b246b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a150a81da38cd990da60c0363014b246b">MASTER_ID</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a150a81da38cd990da60c0363014b246b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f936282297efd37aad4e4f5734fe10e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a4f936282297efd37aad4e4f5734fe10e">SLOT_LENGTH</a>&#160;&#160;&#160;100000</td></tr>
<tr class="separator:a4f936282297efd37aad4e4f5734fe10e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b61d4c3842266e74a8ff12bb478448d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a9b61d4c3842266e74a8ff12bb478448d">SLOT_LENGTH_MS</a>&#160;&#160;&#160;(<a class="el" href="anchor__c_8h.html#a4f936282297efd37aad4e4f5734fe10e">SLOT_LENGTH</a> / 1000)</td></tr>
<tr class="separator:a9b61d4c3842266e74a8ff12bb478448d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c15a1497fab169cf87b9b2058d4dc30"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a5c15a1497fab169cf87b9b2058d4dc30">IN_US</a>&#160;&#160;&#160;1E6</td></tr>
<tr class="separator:a5c15a1497fab169cf87b9b2058d4dc30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cb996bb5c8d0991d1456a6e5df88bce"><td class="memItemLeft" align="right" valign="top"><a id="a1cb996bb5c8d0991d1456a6e5df88bce"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_DEBUG_</b></td></tr>
<tr class="separator:a1cb996bb5c8d0991d1456a6e5df88bce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2759269c92e6d05675a698378dac492"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#ab2759269c92e6d05675a698378dac492">DPRINTF</a>&#160;&#160;&#160;Serial.print</td></tr>
<tr class="separator:ab2759269c92e6d05675a698378dac492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af227566f7e17ac6e442f456682535224"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#af227566f7e17ac6e442f456682535224">DPRINTFLN</a>&#160;&#160;&#160;Serial.println</td></tr>
<tr class="separator:af227566f7e17ac6e442f456682535224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae58a5dbc8abde6b2ef372b773b15db20"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#ae58a5dbc8abde6b2ef372b773b15db20">ASCII_NUMBERS_OFFSET</a>&#160;&#160;&#160;48</td></tr>
<tr class="separator:ae58a5dbc8abde6b2ef372b773b15db20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a767078db7eb37ffc0d4f029d3e64e5ec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a767078db7eb37ffc0d4f029d3e64e5ec">AIR_SPEED_OF_LIGHT</a>&#160;&#160;&#160;299700000.0</td></tr>
<tr class="separator:a767078db7eb37ffc0d4f029d3e64e5ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecf388aeabc7f32bb9cc514227a4d6ec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#aecf388aeabc7f32bb9cc514227a4d6ec">DW1000_TIMEBASE</a>&#160;&#160;&#160;15.65E-12</td></tr>
<tr class="separator:aecf388aeabc7f32bb9cc514227a4d6ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ddd570ad03298cdcf6728dcc3b82985"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a4ddd570ad03298cdcf6728dcc3b82985">CALIBRATION</a>&#160;&#160;&#160;0.9</td></tr>
<tr class="separator:a4ddd570ad03298cdcf6728dcc3b82985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1fb4f272db7698d9667f109d81bf1b5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#aa1fb4f272db7698d9667f109d81bf1b5">SPEED_COEFF</a>&#160;&#160;&#160;<a class="el" href="anchor__c_8h.html#a767078db7eb37ffc0d4f029d3e64e5ec">AIR_SPEED_OF_LIGHT</a>*<a class="el" href="anchor__c_8h.html#aecf388aeabc7f32bb9cc514227a4d6ec">DW1000_TIMEBASE</a>*<a class="el" href="anchor__c_8h.html#a4ddd570ad03298cdcf6728dcc3b82985">CALIBRATION</a></td></tr>
<tr class="separator:aa1fb4f272db7698d9667f109d81bf1b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad380e380939eae9a5d6c8f228f0fe7c8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#ad380e380939eae9a5d6c8f228f0fe7c8">TX_TIMEOUT</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:ad380e380939eae9a5d6c8f228f0fe7c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e53751a27267574b92f23d01951a259"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a5e53751a27267574b92f23d01951a259">ACK_TIMEOUT</a>&#160;&#160;&#160;<a class="el" href="anchor__c_8h.html#a9b61d4c3842266e74a8ff12bb478448d">SLOT_LENGTH_MS</a></td></tr>
<tr class="separator:a5e53751a27267574b92f23d01951a259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abce801f11f46f7a2f8d9d4bfd0b77672"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#abce801f11f46f7a2f8d9d4bfd0b77672">DATA_TIMEOUT</a>&#160;&#160;&#160;<a class="el" href="anchor__c_8h.html#a9b61d4c3842266e74a8ff12bb478448d">SLOT_LENGTH_MS</a></td></tr>
<tr class="separator:abce801f11f46f7a2f8d9d4bfd0b77672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0525bb869371e594a31064887054b8ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a0525bb869371e594a31064887054b8ef">START_TIMEOUT</a>&#160;&#160;&#160;(<a class="el" href="anchor__c_8h.html#ae457777c1a4a1aff4de8f5b9e3fac05d">NB_ANCHORS</a> * <a class="el" href="anchor__c_8h.html#a9b61d4c3842266e74a8ff12bb478448d">SLOT_LENGTH_MS</a>)</td></tr>
<tr class="separator:a0525bb869371e594a31064887054b8ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2444cfca40c9e6220c8482b67057d34c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a2444cfca40c9e6220c8482b67057d34c">TWR_ENGINE_STATE_INIT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a2444cfca40c9e6220c8482b67057d34c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9742f8698e0f1524a55bd96ac701b89f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a9742f8698e0f1524a55bd96ac701b89f">TWR_ENGINE_STATE_IDLE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a9742f8698e0f1524a55bd96ac701b89f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a305fd92d5a9c781654dd75cac54ce401"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a305fd92d5a9c781654dd75cac54ce401">TWR_ENGINE_STATE_SERIAL</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a305fd92d5a9c781654dd75cac54ce401"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3df00f8f35f39aecd3a48b65b52d47b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a3df00f8f35f39aecd3a48b65b52d47b0">TWR_ENGINE_PREPARE_RANGING</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a3df00f8f35f39aecd3a48b65b52d47b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae49bab51abacdb25a8597218661e1ca4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#ae49bab51abacdb25a8597218661e1ca4">TWR_ENGINE_STATE_SEND_START</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:ae49bab51abacdb25a8597218661e1ca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f2aad11922251266db6830717394e3c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a0f2aad11922251266db6830717394e3c">TWR_ENGINE_STATE_WAIT_ACK</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a0f2aad11922251266db6830717394e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadf1cc5fe7d1c33c54d072b5c278eed6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#aadf1cc5fe7d1c33c54d072b5c278eed6">TWR_ENGINE_STATE_WAIT_DATA_REPLY</a>&#160;&#160;&#160;6</td></tr>
<tr class="separator:aadf1cc5fe7d1c33c54d072b5c278eed6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a592e2360d2a193388eaf8203dd5c9ba0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a592e2360d2a193388eaf8203dd5c9ba0">TWR_ENGINE_STATE_EXTRACT_T2_T3</a>&#160;&#160;&#160;7</td></tr>
<tr class="separator:a592e2360d2a193388eaf8203dd5c9ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2608c6aec872ce5104e533fe6ddaa35f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a2608c6aec872ce5104e533fe6ddaa35f">TWR_ENGINE_STATE_SEND_DATA_PI</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a2608c6aec872ce5104e533fe6ddaa35f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8198baeb96a824cb010840fe9eb5bc2f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a8198baeb96a824cb010840fe9eb5bc2f">TWR_ON_GOING</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a8198baeb96a824cb010840fe9eb5bc2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af475d26f99a56b508a4488de32948922"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#af475d26f99a56b508a4488de32948922">TWR_COMPLETE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:af475d26f99a56b508a4488de32948922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4740f2edc79f06ad6a4dca738990555d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a4740f2edc79f06ad6a4dca738990555d">TWR_MSG_TYPE_START</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a4740f2edc79f06ad6a4dca738990555d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab02c91f5ea65f95c537e44d1e55b08df"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#ab02c91f5ea65f95c537e44d1e55b08df">TWR_MSG_TYPE_ACK</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ab02c91f5ea65f95c537e44d1e55b08df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14079cb86399454a47187f9dd15035d1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a14079cb86399454a47187f9dd15035d1">TWR_MSG_TYPE_DATA_REPLY</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a14079cb86399454a47187f9dd15035d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfccf1f8155a41a6fca7fcb86a9c7557"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#adfccf1f8155a41a6fca7fcb86a9c7557">NB_ROBOTS</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:adfccf1f8155a41a6fca7fcb86a9c7557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a740f39a508d6d660248f66ce94807d96"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a740f39a508d6d660248f66ce94807d96">COOPERATIVE</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a740f39a508d6d660248f66ce94807d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6656c7def827a0dbde72549da05ecd12"><td class="memItemLeft" align="right" valign="top"><a id="a6656c7def827a0dbde72549da05ecd12"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NB_GHOST_ANCHORS</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a6656c7def827a0dbde72549da05ecd12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d5f17f4df5d95624ef5c8581789f6e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a8d5f17f4df5d95624ef5c8581789f6e3">NB_TOTAL_ANCHORS</a>&#160;&#160;&#160;(<a class="el" href="anchor__c_8h.html#ae457777c1a4a1aff4de8f5b9e3fac05d">NB_ANCHORS</a> + NB_GHOST_ANCHORS)</td></tr>
<tr class="separator:a8d5f17f4df5d95624ef5c8581789f6e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a229865cac3d89d939060fc2a0a46fc92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a229865cac3d89d939060fc2a0a46fc92">anchor_setup</a> ()</td></tr>
<tr class="memdesc:a229865cac3d89d939060fc2a0a46fc92"><td class="mdescLeft">&#160;</td><td class="mdescRight">DecaWino setup for anchor mode.  <a href="#a229865cac3d89d939060fc2a0a46fc92">More...</a><br /></td></tr>
<tr class="separator:a229865cac3d89d939060fc2a0a46fc92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac10c0d7c63ddb78c74ce6b942778aeb0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#ac10c0d7c63ddb78c74ce6b942778aeb0">anchor_RxTxConfig</a> ()</td></tr>
<tr class="memdesc:ac10c0d7c63ddb78c74ce6b942778aeb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">RX/TX setup for DW1000 in anchor mode. Sets the channel, preamble length, preamble code and PRF.  <a href="#ac10c0d7c63ddb78c74ce6b942778aeb0">More...</a><br /></td></tr>
<tr class="separator:ac10c0d7c63ddb78c74ce6b942778aeb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44620c59e3eba142cc41cb7cc8183cc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a44620c59e3eba142cc41cb7cc8183cc4">print_byte_array</a> (byte b[8])</td></tr>
<tr class="memdesc:a44620c59e3eba142cc41cb7cc8183cc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays an 8-bytes array on the serial port.  <a href="#a44620c59e3eba142cc41cb7cc8183cc4">More...</a><br /></td></tr>
<tr class="separator:a44620c59e3eba142cc41cb7cc8183cc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aad4b6f80cf0ef4be418d7318e91a44"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a4aad4b6f80cf0ef4be418d7318e91a44">byte_array_cmp</a> (byte b1[8], byte b2[8])</td></tr>
<tr class="memdesc:a4aad4b6f80cf0ef4be418d7318e91a44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if two 8-bytes array are equal.  <a href="#a4aad4b6f80cf0ef4be418d7318e91a44">More...</a><br /></td></tr>
<tr class="separator:a4aad4b6f80cf0ef4be418d7318e91a44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25f45532a8a2602bced37f701b365e8b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a25f45532a8a2602bced37f701b365e8b">get_tag_idx</a> (byte tag_ID[8])</td></tr>
<tr class="memdesc:a25f45532a8a2602bced37f701b365e8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the index of a given tag ID in the tag ID list.  <a href="#a25f45532a8a2602bced37f701b365e8b">More...</a><br /></td></tr>
<tr class="separator:a25f45532a8a2602bced37f701b365e8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b20c779e29c5b89547defddfab8bd7b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a1b20c779e29c5b89547defddfab8bd7b">anchor_loop</a> ()</td></tr>
<tr class="memdesc:a1b20c779e29c5b89547defddfab8bd7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">One iteration of the main FSM loop for TWR, with default ID parameters in header file.  <a href="#a1b20c779e29c5b89547defddfab8bd7b">More...</a><br /></td></tr>
<tr class="separator:a1b20c779e29c5b89547defddfab8bd7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cae2d846207eb429d7ed0f84b4439c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="anchor__c_8h.html#a5cae2d846207eb429d7ed0f84b4439c7">anchor_loop</a> (byte *myID, byte *myNextAnchorID)</td></tr>
<tr class="memdesc:a5cae2d846207eb429d7ed0f84b4439c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">One iteration of the main FSM loop for TWR.  <a href="#a5cae2d846207eb429d7ed0f84b4439c7">More...</a><br /></td></tr>
<tr class="separator:a5cae2d846207eb429d7ed0f84b4439c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for the cooperative anchor firmware. This firmware is intended for DecaWino chips. Anchors are fixed stations performing ranging with mobile tags. The cooperative anchor firmware allow an anchor to design a tag to participate in a verification process. See the platform documentation for details. </p>
<dl class="section author"><dt>Author</dt><dd>Baptiste Pestourie </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019 December 1st </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://github.com/Hedwyn/SecureLoc">https://github.com/Hedwyn/SecureLoc</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a5e53751a27267574b92f23d01951a259"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e53751a27267574b92f23d01951a259">&#9670;&nbsp;</a></span>ACK_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACK_TIMEOUT&#160;&#160;&#160;<a class="el" href="anchor__c_8h.html#a9b61d4c3842266e74a8ff12bb478448d">SLOT_LENGTH_MS</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acknowledgment watchdog in TWR protocol </p>

</div>
</div>
<a id="a767078db7eb37ffc0d4f029d3e64e5ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a767078db7eb37ffc0d4f029d3e64e5ec">&#9670;&nbsp;</a></span>AIR_SPEED_OF_LIGHT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AIR_SPEED_OF_LIGHT&#160;&#160;&#160;299700000.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Speed of light constant to extract distances from time-of-flight measurements </p>

</div>
</div>
<a id="a55adda1b2ce56b29cafbdd025bfaeebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55adda1b2ce56b29cafbdd025bfaeebc">&#9670;&nbsp;</a></span>ALOHA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ALOHA&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enables ALOHA scheduling- check any documentation on ALOHA for further information </p>

</div>
</div>
<a id="a060c0b0e5f54bd35f2fc92e85b6773ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a060c0b0e5f54bd35f2fc92e85b6773ab">&#9670;&nbsp;</a></span>ALOHA_COLLISION_DELAY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ALOHA_COLLISION_DELAY&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delayed to wait when detecting collisions in ALOHA mode </p>

</div>
</div>
<a id="ae58a5dbc8abde6b2ef372b773b15db20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae58a5dbc8abde6b2ef372b773b15db20">&#9670;&nbsp;</a></span>ASCII_NUMBERS_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASCII_NUMBERS_OFFSET&#160;&#160;&#160;48</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Char to printable value conversion for serial communications </p>

</div>
</div>
<a id="a4ddd570ad03298cdcf6728dcc3b82985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ddd570ad03298cdcf6728dcc3b82985">&#9670;&nbsp;</a></span>CALIBRATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALIBRATION&#160;&#160;&#160;0.9</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calibration coefficient to apply to the distance measurements </p>

</div>
</div>
<a id="a740f39a508d6d660248f66ce94807d96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a740f39a508d6d660248f66ce94807d96">&#9670;&nbsp;</a></span>COOPERATIVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COOPERATIVE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enables cooperative mode - see documentation for further details </p>

</div>
</div>
<a id="abce801f11f46f7a2f8d9d4bfd0b77672"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abce801f11f46f7a2f8d9d4bfd0b77672">&#9670;&nbsp;</a></span>DATA_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DATA_TIMEOUT&#160;&#160;&#160;<a class="el" href="anchor__c_8h.html#a9b61d4c3842266e74a8ff12bb478448d">SLOT_LENGTH_MS</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DATA watchdog in TWR protocol </p>

</div>
</div>
<a id="af1afee9556b3ca858092d58c729a0649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1afee9556b3ca858092d58c729a0649">&#9670;&nbsp;</a></span>DMAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAX&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum distance considered as realistic - should be adapted to the environment </p>

</div>
</div>
<a id="ab2759269c92e6d05675a698378dac492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2759269c92e6d05675a698378dac492">&#9670;&nbsp;</a></span>DPRINTF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DPRINTF&#160;&#160;&#160;Serial.print</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When defined, enables debug ouput on the serial port </p>

</div>
</div>
<a id="af227566f7e17ac6e442f456682535224"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af227566f7e17ac6e442f456682535224">&#9670;&nbsp;</a></span>DPRINTFLN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DPRINTFLN&#160;&#160;&#160;Serial.println</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When defined, enables debug ouput on the serial port </p>

</div>
</div>
<a id="aecf388aeabc7f32bb9cc514227a4d6ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecf388aeabc7f32bb9cc514227a4d6ec">&#9670;&nbsp;</a></span>DW1000_TIMEBASE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DW1000_TIMEBASE&#160;&#160;&#160;15.65E-12</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resolution of the system clock - value of 1 bit </p>

</div>
</div>
<a id="a99c8dafec4d0173d7cdf5de73f9cef69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99c8dafec4d0173d7cdf5de73f9cef69">&#9670;&nbsp;</a></span>EXTENDED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXTENDED&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enables extended DATA mode- sends an extended set of PHY data to RPI (TODO) </p>

</div>
</div>
<a id="a5c15a1497fab169cf87b9b2058d4dc30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c15a1497fab169cf87b9b2058d4dc30">&#9670;&nbsp;</a></span>IN_US</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IN_US&#160;&#160;&#160;1E6</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Second to microsecond conversion </p>

</div>
</div>
<a id="a150a81da38cd990da60c0363014b246b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a150a81da38cd990da60c0363014b246b">&#9670;&nbsp;</a></span>MASTER_ID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MASTER_ID&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enables Master anchor mode. The Master anchor is responsible for the cooperative operations and the TDMA watchdog </p>

</div>
</div>
<a id="ae457777c1a4a1aff4de8f5b9e3fac05d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae457777c1a4a1aff4de8f5b9e3fac05d">&#9670;&nbsp;</a></span>NB_ANCHORS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NB_ANCHORS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default total number of anchors, should be defined during compilation </p>

</div>
</div>
<a id="adfccf1f8155a41a6fca7fcb86a9c7557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfccf1f8155a41a6fca7fcb86a9c7557">&#9670;&nbsp;</a></span>NB_ROBOTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NB_ROBOTS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Total number of mobile tags </p>

</div>
</div>
<a id="a8d5f17f4df5d95624ef5c8581789f6e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d5f17f4df5d95624ef5c8581789f6e3">&#9670;&nbsp;</a></span>NB_TOTAL_ANCHORS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NB_TOTAL_ANCHORS&#160;&#160;&#160;(<a class="el" href="anchor__c_8h.html#ae457777c1a4a1aff4de8f5b9e3fac05d">NB_ANCHORS</a> + NB_GHOST_ANCHORS)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Total number of anchors inclujding ghost anchors </p>

</div>
</div>
<a id="ae19bfd2ea75b7ddfc0c9e520240ab733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae19bfd2ea75b7ddfc0c9e520240ab733">&#9670;&nbsp;</a></span>NODE_ID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NODE_ID&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default tag ID. Should be defined during compilation when deploying </p>

</div>
</div>
<a id="a4f936282297efd37aad4e4f5734fe10e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f936282297efd37aad4e4f5734fe10e">&#9670;&nbsp;</a></span>SLOT_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SLOT_LENGTH&#160;&#160;&#160;100000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TDMA slot length, in microseconds </p>

</div>
</div>
<a id="a9b61d4c3842266e74a8ff12bb478448d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b61d4c3842266e74a8ff12bb478448d">&#9670;&nbsp;</a></span>SLOT_LENGTH_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SLOT_LENGTH_MS&#160;&#160;&#160;(<a class="el" href="anchor__c_8h.html#a4f936282297efd37aad4e4f5734fe10e">SLOT_LENGTH</a> / 1000)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TDMA slot length, in milliseconds </p>

</div>
</div>
<a id="aa1fb4f272db7698d9667f109d81bf1b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1fb4f272db7698d9667f109d81bf1b5">&#9670;&nbsp;</a></span>SPEED_COEFF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPEED_COEFF&#160;&#160;&#160;<a class="el" href="anchor__c_8h.html#a767078db7eb37ffc0d4f029d3e64e5ec">AIR_SPEED_OF_LIGHT</a>*<a class="el" href="anchor__c_8h.html#aecf388aeabc7f32bb9cc514227a4d6ec">DW1000_TIMEBASE</a>*<a class="el" href="anchor__c_8h.html#a4ddd570ad03298cdcf6728dcc3b82985">CALIBRATION</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calibrated speed of light constantt </p>

</div>
</div>
<a id="a0525bb869371e594a31064887054b8ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0525bb869371e594a31064887054b8ef">&#9670;&nbsp;</a></span>START_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define START_TIMEOUT&#160;&#160;&#160;(<a class="el" href="anchor__c_8h.html#ae457777c1a4a1aff4de8f5b9e3fac05d">NB_ANCHORS</a> * <a class="el" href="anchor__c_8h.html#a9b61d4c3842266e74a8ff12bb478448d">SLOT_LENGTH_MS</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>START watchdog for TDMA scheduling - triggered when previous anchor stayed quiet </p>

</div>
</div>
<a id="af475d26f99a56b508a4488de32948922"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af475d26f99a56b508a4488de32948922">&#9670;&nbsp;</a></span>TWR_COMPLETE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_COMPLETE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ret value for main loop - TWR protocol complete </p>

</div>
</div>
<a id="a3df00f8f35f39aecd3a48b65b52d47b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3df00f8f35f39aecd3a48b65b52d47b0">&#9670;&nbsp;</a></span>TWR_ENGINE_PREPARE_RANGING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_ENGINE_PREPARE_RANGING&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When reaching the attributed TDMA slot, starts TWR protocol </p>

</div>
</div>
<a id="a592e2360d2a193388eaf8203dd5c9ba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a592e2360d2a193388eaf8203dd5c9ba0">&#9670;&nbsp;</a></span>TWR_ENGINE_STATE_EXTRACT_T2_T3</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_ENGINE_STATE_EXTRACT_T2_T3&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Computes time-of-flight &amp; distance </p>

</div>
</div>
<a id="a9742f8698e0f1524a55bd96ac701b89f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9742f8698e0f1524a55bd96ac701b89f">&#9670;&nbsp;</a></span>TWR_ENGINE_STATE_IDLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_ENGINE_STATE_IDLE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handles TDMA/Aloha scheduling in-between TWR protocols </p>

</div>
</div>
<a id="a2444cfca40c9e6220c8482b67057d34c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2444cfca40c9e6220c8482b67057d34c">&#9670;&nbsp;</a></span>TWR_ENGINE_STATE_INIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_ENGINE_STATE_INIT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default starting state </p>

</div>
</div>
<a id="a2608c6aec872ce5104e533fe6ddaa35f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2608c6aec872ce5104e533fe6ddaa35f">&#9670;&nbsp;</a></span>TWR_ENGINE_STATE_SEND_DATA_PI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_ENGINE_STATE_SEND_DATA_PI&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends the distance &amp; other PHY data to host RPI </p>

</div>
</div>
<a id="ae49bab51abacdb25a8597218661e1ca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae49bab51abacdb25a8597218661e1ca4">&#9670;&nbsp;</a></span>TWR_ENGINE_STATE_SEND_START</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_ENGINE_STATE_SEND_START&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends START to the target tag </p>

</div>
</div>
<a id="a305fd92d5a9c781654dd75cac54ce401"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a305fd92d5a9c781654dd75cac54ce401">&#9670;&nbsp;</a></span>TWR_ENGINE_STATE_SERIAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_ENGINE_STATE_SERIAL&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handles serial communications with the host RPI </p>

</div>
</div>
<a id="a0f2aad11922251266db6830717394e3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f2aad11922251266db6830717394e3c">&#9670;&nbsp;</a></span>TWR_ENGINE_STATE_WAIT_ACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_ENGINE_STATE_WAIT_ACK&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ACK polling - back to INIT if timeout </p>

</div>
</div>
<a id="aadf1cc5fe7d1c33c54d072b5c278eed6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadf1cc5fe7d1c33c54d072b5c278eed6">&#9670;&nbsp;</a></span>TWR_ENGINE_STATE_WAIT_DATA_REPLY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_ENGINE_STATE_WAIT_DATA_REPLY&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DATA polling - back to INIT if timeout </p>

</div>
</div>
<a id="ab02c91f5ea65f95c537e44d1e55b08df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab02c91f5ea65f95c537e44d1e55b08df">&#9670;&nbsp;</a></span>TWR_MSG_TYPE_ACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_MSG_TYPE_ACK&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ACK frame header </p>

</div>
</div>
<a id="a14079cb86399454a47187f9dd15035d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14079cb86399454a47187f9dd15035d1">&#9670;&nbsp;</a></span>TWR_MSG_TYPE_DATA_REPLY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_MSG_TYPE_DATA_REPLY&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DATA frame header </p>

</div>
</div>
<a id="a4740f2edc79f06ad6a4dca738990555d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4740f2edc79f06ad6a4dca738990555d">&#9670;&nbsp;</a></span>TWR_MSG_TYPE_START</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_MSG_TYPE_START&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>START frame header </p>

</div>
</div>
<a id="a8198baeb96a824cb010840fe9eb5bc2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8198baeb96a824cb010840fe9eb5bc2f">&#9670;&nbsp;</a></span>TWR_ON_GOING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWR_ON_GOING&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ret value for main loop - TWR protocol is still running </p>

</div>
</div>
<a id="ad380e380939eae9a5d6c8f228f0fe7c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad380e380939eae9a5d6c8f228f0fe7c8">&#9670;&nbsp;</a></span>TX_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TX_TIMEOUT&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Watchdog for failed transmission that never complete </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1b20c779e29c5b89547defddfab8bd7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b20c779e29c5b89547defddfab8bd7b">&#9670;&nbsp;</a></span>anchor_loop() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int anchor_loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>One iteration of the main FSM loop for TWR, with default ID parameters in header file. </p>
<dl class="section author"><dt>Author</dt><dd>Baptiste Pestourie </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019 December 1st </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>TWR state (/!\ different from the FSM state)) </dd></dl>

</div>
</div>
<a id="a5cae2d846207eb429d7ed0f84b4439c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cae2d846207eb429d7ed0f84b4439c7">&#9670;&nbsp;</a></span>anchor_loop() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int anchor_loop </td>
          <td>(</td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>myID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>myNextAnchorID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>One iteration of the main FSM loop for TWR. </p>
<dl class="section author"><dt>Author</dt><dd>Baptiste Pestourie </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019 December 1st </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">myID</td><td>anchor ID to use </td></tr>
    <tr><td class="paramname">myNextAnchorID</td><td>ID of the following anchor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TWR state (/!\ different from the FSM state)) </dd></dl>
<p>Starting state of the FSM. CHecks for timeouts and restart a TWR cycle for the Master anchor. For the others, skip directly to IDLE state <br />
<br />
<br />
<br />
<br />
<br />
 Checks for serial commands, otherwise proceeds to start the ranging process <br />
<br />
<br />
<br />
<br />
 Sending a ranging request (START frame) to the target tag <br />
<br />
<br />
<br />
 Waiting for the reply (Acknowledgment frame) of the target device <br />
<br />
<br />
 Waiting for the timestamps (DATA frame) of the target device <br />
<br />
 Extracting timestamps from DATA frame and calculating the distance <br />
 Sends the Ranging results along with PHY data to the host RPI on serial port </p>

</div>
</div>
<a id="ac10c0d7c63ddb78c74ce6b942778aeb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac10c0d7c63ddb78c74ce6b942778aeb0">&#9670;&nbsp;</a></span>anchor_RxTxConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void anchor_RxTxConfig </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RX/TX setup for DW1000 in anchor mode. Sets the channel, preamble length, preamble code and PRF. </p>
<dl class="section author"><dt>Author</dt><dd>Baptiste Pestourie </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019 December 1st </dd></dl>

</div>
</div>
<a id="a229865cac3d89d939060fc2a0a46fc92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a229865cac3d89d939060fc2a0a46fc92">&#9670;&nbsp;</a></span>anchor_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void anchor_setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DecaWino setup for anchor mode. </p>
<dl class="section author"><dt>Author</dt><dd>Baptiste Pestourie </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019 December 1st </dd></dl>

</div>
</div>
<a id="a4aad4b6f80cf0ef4be418d7318e91a44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4aad4b6f80cf0ef4be418d7318e91a44">&#9670;&nbsp;</a></span>byte_array_cmp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int byte_array_cmp </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>b1</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>b2</em>[8]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if two 8-bytes array are equal. </p>
<dl class="section author"><dt>Author</dt><dd>Baptiste Pestourie </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019 December 1st </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">8-bytes</td><td>array (ID format) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if all the elements in both arrays are equal </dd></dl>

</div>
</div>
<a id="a25f45532a8a2602bced37f701b365e8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25f45532a8a2602bced37f701b365e8b">&#9670;&nbsp;</a></span>get_tag_idx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_tag_idx </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>tag_ID</em>[8]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds the index of a given tag ID in the tag ID list. </p>
<dl class="section author"><dt>Author</dt><dd>Baptiste Pestourie </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019 December 1st </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b1</td><td>8-byte array </td></tr>
    <tr><td class="paramname">b2</td><td>8-byte array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the index of the tag ID if found, -1 otherwise </dd></dl>

</div>
</div>
<a id="a44620c59e3eba142cc41cb7cc8183cc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44620c59e3eba142cc41cb7cc8183cc4">&#9670;&nbsp;</a></span>print_byte_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_byte_array </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>b</em>[8]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays an 8-bytes array on the serial port. </p>
<dl class="section author"><dt>Author</dt><dd>Baptiste Pestourie </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019 December 1st </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
